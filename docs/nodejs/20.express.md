## 安装

```
npm i express --save
```

## 引入使用

```js
const express = require("express");
const port=5000
const app=express()
app.get('/',(req,res)=>{
    res.send('Hello world')
    
})

app.listen(port,()=>{
    console.log(`open in https://localhost:${port}`);
})
```

这里是get请求，还支持，put,post,delete请求

## 动态路由

```js
const express = require("express");
const port=5000
const app=express()
app.get('/',(req,res)=>{
    res.send('Hello world')
    
})
app.get('/news',(req,res)=>{
    res.send('news here')
})
app.get('/news/:id',(req,res)=>{  //:id就是表示这个字符串是动态的，
    let id=req.params["id"] //然后穿过来的id字符串在req.params里面
    res.send(`this is no:${id} news`)
})

app.listen(port,()=>{
    console.log(`open in https://localhost:${port}`);
})
```

这样我们访问http://localhost:5000/news/65

那么页面显示的就是this is no:65 news

## 获取get传值

我们向news路由传值

http://localhost:5000/news?name=xiaoyu&age=32

nodejs中，我们会用url来获取数据，express不用

```js
app.get('/news',(req,res)=>{
    let query=req.query
    console.log(query);
    res.send('news here')
})
```

让我们来看看query是什么值

结果：{ name: 'xiaoyu', age: '32' }

我们发现直接把传过来的值变成了对象，非常方便

## ejs模板

### 安装

```node
npm i ejs --save
```

### 配置引擎

```js
app.set("view engine","ejs")//配置ejs模板引擎
```

### 加载模板

在此之前在根目录下创建一个views目录用来存放模板，我们新建一个index.ejs模板

```js
// data start
let peoples=[
    {name:'xiaoyu',age:33,sex:'man'},
    {name:'ruru',age:32,sex:'women'},
    {name:'haha',age:3,sex:'women'}    
]
//data end
app.set("view engine","ejs")//配置ejs模板引擎
app.get('/',(req,res)=>{
    res.render('index',{    //这里传入加载模板的时候需要传进去的参数
        peoples:peoples    //这里传入名为peoples对应上面peoples的数组
    })
    
})
```

现在我们运行项目在地址http://localhost:5000/就可以看到模板了

### 渲染模板

在模板中index.ejs

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        h1{
            color: blue;
        }
    </style>
</head>

<body>
    <h1>ejs模板</h1>
    <h2>it's very nice</h2>
    <a href="/study">study</a>

    <h2>人物介绍</h2>
  <!-- 在此用ejs模板语法渲染 -->
    <% peoples.forEach(i => { %>       
        <h2><%= i.name %> </h2>
        <h3><%= i.age %> </h3>
        <p><%= i.sex %> </p>
        <hr>     
    <% }) %>

    
</body>
</html>
```

最后就可以直接把要的数据按照指定格式给渲染了

### 模板标签

- `<%` '脚本' 标签，用于流程控制，无输出。//比如if,for等
- `<%_` 删除其前面的空格符
- `<%=` 输出数据到模板（输出是转义 HTML 标签）
- `<%-` 输出非转义的数据到模板   //比如 `<h1>haha</h1>`必须用-才能达到h1的效果，不然输出还带h1标签
- `<%#` 注释标签，不执行、不输出内容
- `<%%` 输出字符串 '<%'
- `%>` 一般结束标签
- `-%>` 删除紧随其后的换行符
- `_%>` 将结束标签后面的空格符删除

### include

我们可以把部分模板引入到你想要的模板中

如我们创建一个模板foot.xjs。想要把它放进index.ejs,study.ejs里面

我们可以在两个模板里用include引入

```ejs
<%- include('foot.ejs',{study:study}) %> 
```

当然这个路径是相对自身的，当然也可以把当前模板的参数传递过去

### 更改模板的后缀名

有时候我们不习惯.ejs的模板，想改成.html

```js
// 更改模板后缀名
const ejs=require('ejs')
app.engine("html",ejs.__express)
app.set("view engine","html")//配置html模板引擎
```

现在就可以把views里的模板都改成html的后缀了

### 配置静态资源

如css,image

在根目录下创建一个static文件夹，里面再建2个目录，css,image

我们在css下创建一个base.css

写上代码

```css
h1{
    color: red;
}
h2{
    color: yellow;
}
p{
    color: blue;
}
```

在app.js中配置静态目录

```js
// 配置静态目录
app.use(express.static('static')) 
```

现在我们就可以直接访问静态目录了http://localhost:5000/css/base.css

最后在给需要用的模板添加上

```html
 <link rel="stylesheet" href="/css/base.css">
```

现在模板里的样式就已经都加载了
